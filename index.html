<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Django Shipment ‚Äì App Usage</title>
  <!-- Link to css -->
  <link rel="stylesheet" href="./style.css" />
</head>

<body>
  <aside>
    <h2>üìñ APP Usage</h2>
    <a href="#intro">Introduction</a>
    <a href="#features">Features</a>
    <a href="#installation">Installation</a>
    <a href="#usage">Usage</a>
    <a href="#register">Register</a>
    <a href="#login">Login</a>
    <a href="#countries">Origin Country</a>
    <a href="#categories">Categories</a>
    <a href="#destination">Destination</a>
    <a href="#calculate">Calculate</a>
    <a href="#notes">Notes</a>
  </aside>

  <main>
    <h1 id="intro">Django Shipment ‚Äì App Usage</h1>

    <h2 id="features">üöÄ Features</h2>
    <ul>
      <li>JWT Authentication (<b>login & register</b>)</li>
      <li>Dashboard (<b>AdminLTE</b>) for Countries & Categories</li>
      <li>Freight Calculator API integrated with <b>RajaOngkir Komerce</b></li>
    </ul>

    <h2 id="installation">‚öôÔ∏è Installation & Running the Application</h2>
    <ol>
      <li>Clone the repository:
        <pre><code>git clone https://github.com/rakarahadyan/django-shipment.git
cd django-shipment</code></pre>
      </li>
      <li>Create and activate a virtual environment:
        <pre><code>python -m venv venv
source venv/bin/activate   # On macOS/Linux
venv\Scripts\activate      # On Windows</code></pre>
      </li>
      <li>Install dependencies:
        <pre><code>pip install -r requirements.txt</code></pre>
      </li>
      <li>Setup MySQL database:
        <pre><code>CREATE DATABASE django_shipment CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;</code></pre>
        Update your <code>settings.py</code> with the database configuration:
        <pre><code>DATABASES = {
    'default': {
        'ENGINE': 'django.db.backends.mysql',
        'NAME': 'django_shipment',
        'USER': 'root',        # change to your MySQL user
        'PASSWORD': 'password',# change to your MySQL password
        'HOST': '127.0.0.1',
        'PORT': '3306',
    }
}</code></pre>
      </li>
      <li>Apply migrations:
        <pre><code>python manage.py migrate</code></pre>
      </li>
      <li>Create a superuser (for accessing the AdminLTE dashboard):
        <pre><code>python manage.py createsuperuser</code></pre>
      </li>
      <li>Run the development server:
        <pre><code>python manage.py runserver</code></pre>
      </li>
      <li>Open the app in your browser:
        <pre><code>http://127.0.0.1:8000/</code></pre>
      </li>
    </ol>


    <h2 id="usage">üì¶ How to Use the Application</h2>
    <ol>
      <li><b>Register</b> a new account via <code>/accounts/api/register/</code> or the app‚Äôs sign-up form.</li>
      <li><b>Login</b> with your email and password to obtain an <code>access_token</code>.</li>
      <li><b>Search Origin Country</b> using <code>/api/countries?search=</code> or by selecting it in the dashboard.
      </li>
      <li><b>Find Categories</b> available for that country via <code>/api/categories?country_id=&amp;search=</code>.
      </li>
      <li><b>Select Destination</b> by searching city/subdistrict via <code>/api/destination?search=</code>.</li>
      <li><b>Calculate Freight</b> by sending country, category, destination, and weight to
        <code>/api/calculate/</code>.
      </li>
      <li>View the <b>total shipping price</b> (international + domestic) from the response or app UI.</li>
    </ol>

    <!-- Register -->
    <div class="api-card" id="register">
      <div class="api-header">
        <span class="method post">POST</span>
        <span class="url">/accounts/api/register/</span>
      </div>
      <div class="api-section"><strong>Description:</strong> Register new user</div>

      <div class="api-section"><strong>Headers:</strong>
        <table>
          <thead>
            <tr>
              <th>Key</th>
              <th>Type</th>
              <th>Description</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>Content-Type</td>
              <td>string</td>
              <td><code>application/json</code></td>
            </tr>
          </tbody>
        </table>
      </div>

      <div class="api-section"><strong>Request Body:</strong>
        <pre><code>{
  "email": "user@mail.com",
  "password": "123456"
}</code></pre>
      </div>

      <div class="api-section"><strong>Response (201):</strong>
        <pre><code>{
  "id": 1,
  "email": "user@mail.com"
}</code></pre>
      </div>
    </div>

    <!-- Login -->
    <div class="api-card" id="login">
      <div class="api-header">
        <span class="method post">POST</span>
        <span class="url">/accounts/api/login/</span>
      </div>
      <div class="api-section"><strong>Description:</strong> User login and get JWT tokens</div>

      <div class="api-section"><strong>Headers:</strong>
        <table>
          <thead>
            <tr>
              <th>Key</th>
              <th>Type</th>
              <th>Description</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>Content-Type</td>
              <td>string</td>
              <td><code>application/json</code></td>
            </tr>
          </tbody>
        </table>
      </div>

      <div class="api-section"><strong>Request Body:</strong>
        <pre><code>{
  "email": "user@mail.com",
  "password": "123456"
}</code></pre>
      </div>

      <div class="api-section"><strong>Response (200):</strong>
        <pre><code>{
  "refresh": "&lt;refresh_token&gt;",
  "access": "&lt;access_token&gt;"
}</code></pre>
      </div>
    </div>

    <!-- Countries -->
    <div class="api-card" id="countries">
      <div class="api-header">
        <span class="method get">GET</span>
        <span class="url">/api/countries?search={country}</span>
      </div>
      <div class="api-section"><strong>Description:</strong> Search origin countries</div>

      <div class="api-section"><strong>Headers:</strong>
        <table>
          <thead>
            <tr>
              <th>Key</th>
              <th>Type</th>
              <th>Description</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>Authorization</td>
              <td>string</td>
              <td><code>Bearer &lt;access_token&gt;</code></td>
            </tr>
          </tbody>
        </table>
      </div>

      <div class="api-section"><strong>Query Parameters:</strong>
        <table>
          <thead>
            <tr>
              <th>Key</th>
              <th>Type</th>
              <th>Description</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>search</td>
              <td>string</td>
              <td>Keyword to search countries</td>
            </tr>
          </tbody>
        </table>
      </div>

      <div class="api-section"><strong>Response (200):</strong>
        <pre><code>[
  {
    "id": 1,
    "country_name": "China",
    "country_flag": "https://flagcdn.com/cn.svg",
    "country_currency": "CNY"
  }
]</code></pre>
      </div>
    </div>

    <!-- Categories -->
    <div class="api-card" id="categories">
      <div class="api-header">
        <span class="method get">GET</span>
        <span class="url">/api/categories?country_id={id}&amp;search={category}</span>
      </div>
      <div class="api-section"><strong>Description:</strong> Search categories by country</div>

      <div class="api-section"><strong>Headers:</strong>
        <table>
          <thead>
            <tr>
              <th>Key</th>
              <th>Type</th>
              <th>Description</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>Authorization</td>
              <td>string</td>
              <td><code>Bearer &lt;access_token&gt;</code></td>
            </tr>
          </tbody>
        </table>
      </div>

      <div class="api-section"><strong>Query Parameters:</strong>
        <table>
          <thead>
            <tr>
              <th>Key</th>
              <th>Type</th>
              <th>Description</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>country_id</td>
              <td>int</td>
              <td>ID of origin country</td>
            </tr>
            <tr>
              <td>search</td>
              <td>string</td>
              <td>Keyword to search categories</td>
            </tr>
          </tbody>
        </table>
      </div>

      <div class="api-section"><strong>Response (200):</strong>
        <pre><code>[
  {
    "id": 2,
    "country": 1,
    "country_name": "China",
    "category_title": "Laptop",
    "price_per_kilo": "70.00"
  }
]</code></pre>
      </div>
    </div>

    <!-- Destination -->
    <div class="api-card" id="destination">
      <div class="api-header">
        <span class="method get">GET</span>
        <span class="url">/api/destination?search={destination}</span>
      </div>
      <div class="api-section"><strong>Description:</strong> Search destination city</div>

      <div class="api-section"><strong>Headers:</strong>
        <table>
          <thead>
            <tr>
              <th>Key</th>
              <th>Type</th>
              <th>Description</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>Authorization</td>
              <td>string</td>
              <td><code>Bearer &lt;access_token&gt;</code></td>
            </tr>
          </tbody>
        </table>
      </div>

      <div class="api-section"><strong>Query Parameters:</strong>
        <table>
          <thead>
            <tr>
              <th>Key</th>
              <th>Type</th>
              <th>Description</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>search</td>
              <td>string</td>
              <td>Keyword to search destination</td>
            </tr>
          </tbody>
        </table>
      </div>

      <div class="api-section"><strong>Response (200):</strong>
        <pre><code>[
  {
    "id": 2042,
    "label": "JAKARTA BARU, BULA BARAT, SERAM BAGIAN TIMUR, 97554",
    "subdistrict_name": "JAKARTA BARU",
    "district_name": "BULA BARAT",
    "city_name": "SERAM BAGIAN TIMUR",
    "province_name": "MALUKU",
    "zip_code": "97554"
  }
]</code></pre>
      </div>
    </div>

    <!-- Calculate -->
    <div class="api-card" id="calculate">
      <div class="api-header">
        <span class="method post">POST</span>
        <span class="url">/api/calculate/</span>
      </div>
      <div class="api-section"><strong>Description:</strong> Calculate Freight Price</div>

      <div class="api-section"><strong>Headers:</strong>
        <table>
          <thead>
            <tr>
              <th>Key</th>
              <th>Type</th>
              <th>Description</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>Authorization</td>
              <td>string</td>
              <td><code>Bearer &lt;access_token&gt;</code></td>
            </tr>
            <tr>
              <td>Content-Type</td>
              <td>string</td>
              <td><code>application/json</code></td>
            </tr>
          </tbody>
        </table>
      </div>

      <div class="api-section"><strong>Query Parameters:</strong>
        <table>
          <thead>
            <tr>
              <th>Key</th>
              <th>Type</th>
              <th>Description</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>country_id</td>
              <td>int</td>
              <td>ID of origin country</td>
            </tr>
            <tr>
              <td>category_id</td>
              <td>int</td>
              <td>ID of category</td>
            </tr>
            <tr>
              <td>destination_id</td>
              <td>int</td>
              <td>ID of destination</td>
            </tr>
            <tr>
              <td>weight</td>
              <td>float</td>
              <td>Weight in kilograms</td>
            </tr>
          </tbody>
        </table>
      </div>

      <div class="api-section"><strong>Request Body:</strong>
        <pre><code>{
  "country_id": 1,
  "category_id": 2,
  "destination_id": 501,
  "weight": 1.5
}</code></pre>
      </div>

      <div class="api-section"><strong>Response (200):</strong>
        <pre><code>{
  "origin": "Indonesia",
  "destination": 2042,
  "category_name": "Shoes",
  "international_price": 3750.0,
  "domestic_price": 24600000,
  "total_price": 24603750.0
}</code></pre>
      </div>
    </div>

    <h2 id="tips">üí° Tips to Avoid Errors</h2>
    <ul>
      <li>Always include <code>Authorization: Bearer &lt;access_token&gt;</code> for endpoints that require
        authentication.</li>
      <li>Use <code>Content-Type: application/json</code> for all <b>POST</b> requests.</li>
      <li>Double-check the parameters <b>country_id</b>, <b>category_id</b>, and <b>destination_id</b> to ensure they
        match valid data.</li>
      <li>Use the <b>search</b> query with relevant keywords for more accurate results.</li>
      <li>If you encounter a <code>401 Unauthorized</code> error, re-login to obtain a valid token.</li>
    </ul>

    <h2 id="notes">üìù Notes</h2>
    <ul>
      <li><code>international_price = weight * price_per_kilo</code></li>
      <li><code>domestic_price</code> comes from the <b>RajaOngkir Komerce Domestic Cost API</b></li>
      <li><code>total_price = international_price + domestic_price</code></li>
      <li>The AdminLTE dashboard is used to manage <b>Countries</b> & <b>Categories</b></li>
    </ul>

    <footer>
      Made with ‚ù§Ô∏è for Blueray Cargo interview test.
    </footer>
  </main>
</body>

</html>